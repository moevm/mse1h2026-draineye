# DrainEye

## Запуск приложения на Android
### Подготовка Android-устройства
1. *Включите режим разработчика* (откройте Настройки → О телефоне, найдите пункт «Номер сборки» и нажмите на него 7–10 раз, пока не увидите уведомление «Вы стали разработчиком!»)
2. *Включите отладку по USB* (подключите устройство к компьютеру с помощью USB-кабеля, вернитесь в главное меню настроек, зайдите в раздел «Для разработчиков», включите переключатель «Отладка по USB»). На телефоне подтвердите разрешение на отладку (при подключении должно появиться окно с запросом «Разрешить отладку по USB для этого компьютера?», нажмите «Разрешить»)
### Настройка компьютера (Linux)
1. *Скачайте Android Studio* с официального сайта: https://developer.android.com/studio?hl=ru (версия для Linux), распакуйте архив в удобное место и запустите установку. Во время установки убедитесь, что отмечены компоненты: Android SDK, Android SDK Platform-Tools, Android Emulator и Android SDK Command-line Tools.
2. *Настройка переменных окружения.* Чтобы Flutter и ADB (Android Debug Bridge) находили Android SDK, нужно добавить пути в ~/.bashrc. Откройте терминал и выполните (если Вы устанавливали Android SDK в другую папку, замените путь *$HOME/Android/Sdk* на свой):
``` bash 
echo 'export ANDROID_HOME=$HOME/Android/Sdk' >> ~/.bashrc
echo 'export PATH=$PATH:$ANDROID_HOME/platform-tools' >> ~/.bashrc
echo 'export PATH=$PATH:$ANDROID_HOME/cmdline-tools/latest/bin' >> ~/.bashrc
source ~/.bashrc 
```

3. *Установка системных зависимостей.* Для работы Android SDK на Linux требуются некоторые 32-битные библиотеки :

``` bash
sudo apt update
sudo apt install libc6:i386 libncurses5:i386 libstdc++6:i386 lib32z1 libbz2-1.0:i386
```

4. *Настройка прав доступа к USB-устройству.* Linux требует специальных прав для подключения Android-устройств. Это делается через файл правил udev.
Создайте файл правил:
``` bash
sudo nano /etc/udev/rules.d/51-android.rules
```
Вставьте в него строку (замените 18d1 на vendor ID вашего телефона, если он не Google):
``` bash
SUBSYSTEM=="usb", ATTR{idVendor}=="18d1", MODE="0660", GROUP="plugdev"
```
Сохраните файл и перезагрузите правила:
``` bash
sudo udevadm control --reload-rules
sudo udevadm trigger
```
После этого нужно выйти из системы и зайти снова или перезагрузить компьютер.

5. *Принятие лицензий Android.*
``` bash
flutter doctor --android-licenses
```
Несколько раз нажмите y для принятия всех лицензий

6. *Проверка готовности устройства.* Запустите команду и, если среда для Android будет отмечена зеленой галочкой, устройство подключено и можно запускать приложение.
``` bash
flutter doctor 
``` 

### Настройка компьютера (Windows)
1. *Скачайте Android Studio* с официального сайта: https://developer.android.com/studio?hl=ru (версия для Windows), запустите установщик и следуйте инструкциям. Во время установки убедитесь, что отмечены компоненты: Android SDK, Android SDK Platform-Tools, Android Emulator и Android SDK Command-line Tools.

2. *Настройка переменных среды* (Path). Необходимо добавить пути к Flutter и Android SDK в системную переменную Path. Откройте Параметры Windows → найдите «Переменные среды» (Edit environment variables), нажмите «Переменные среды…», в разделе «Системные переменные» нажмите «Создать» и добавьте новую переменную:

``` text
ANDROID_HOME = %USERPROFILE%\AppData\Local\Android\Sdk
```
(обычно это путь по умолчанию; если вы изменили его, укажите свой). Найдите переменную Path, выберите её и нажмите «Изменить». Добавьте следующие строки (если их нет):

``` text
%ANDROID_HOME%\platform-tools
%ANDROID_HOME%\tools
%ANDROID_HOME%\cmdline-tools\latest\bin
C:\src\flutter\bin   #(путь к вашему Flutter SDK)
```
Нажимайте «ОК» во всех окнах, чтобы сохранить изменения.

3. *Установка USB-драйвера для телефона.* Для корректного подключения Android-устройства на Windows часто требуется драйвер. После подключите телефона по USB, если устройство не определилось автоматически, скачайте драйвер для вашей модели с сайта производителя (например, Samsung, Xiaomi, Google) и установите его.

4. *Принятие лицензий Android.* Откройте Командную строку (cmd) или PowerShell и выполните:
``` cmd
flutter doctor --android-licenses
```
Несколько раз нажмите y для принятия всех лицензий.

5. *Проверка готовности устройства.* Запустите команду:
``` cmd
flutter doctor
```
Если среда для Android отмечена зелёной галочкой, а в разделе «Connected device» отображается ваш телефон, значит всё настроено правильно и можно запускать приложение.


### Подключение устройства к VS Code (Linux и Windows)

1. *Перезапустите ADB-сервер* в терминале:

``` bash
adb kill-server
adb start-server
```
2. *Проверьте подключение в терминале:*
```bash
flutter devices
```
Если всё хорошо, Вы увидите ваш телефон в списке (например, SM G985F • android-arm64 • Android 15 (API 35)).

3. *Запустите VS Code* и откройте ваш Flutter-проект. Выберите устройство для запуска: в правом нижнем углу VS Code (в строке состояния) нажмите на «No Device» (или название другого устройства) и выберите из списка Ваш телефон.

4. *Запустите приложение:* откройте файл lib/main.dart и нажмите клавишу F5 (или выберите в меню Run → Start Debugging). Приложение соберется и запустится на вашем телефоне.